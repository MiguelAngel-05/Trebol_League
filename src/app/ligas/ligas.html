<main class="main-container">
    
    <header class="main-header">
        <div class="header-options top-row">          
            <div class="option-group">
                <img class="icon" src="Utensilios/Emojis/icono-usuario.png" alt="Usuario">
                <p>{{user?.username || 'Usuario'}}</p>
            </div>
            <span class="separator-header">/</span>
            <div class="option-group">
                <p>1.034.500</p> <img class="icon" src="Utensilios/Emojis/moneda-tc.png" alt="Moneda TC">
            </div>
        </div>
        
        <div class="header-optionsB bottom-row">
            <div class="option-group icon-hover">
                <img class="pinchar" src="Utensilios/Emojis/flecha-retroceso.png" alt="Atras" (click)="volverAtras()">
            </div>
        </div>

        <div class="div-img-user">
           <img class="img-user" src="Ejemplos/img-user.jpeg" alt="imagen de usuario"> 
        </div>
    </header>

    <img class="logoTrebol" src="Logos/LogoTrebolLeague.png" alt="logo de trebol league">

    <section class="content">
        <div class="titulo-ligas">
            <h1>Mis Ligas</h1>
        </div>
        
        <div class="contenedor-ligas">
            <div *ngFor="let liga of ligas; let i = index" class="div-liga" 
                 (click)="irALiga(liga.nombre, liga.id_liga)" 
                 [style.animation-delay]="i * 0.1 + 's'">
                 
                <div class="div-img-liga">
                    <img class="img-liga" src="Utensilios/Emojis/escudo-ejemplo.svg" alt="escudo">
                </div>
                
                <div class="div-nombre-liga">
                    <p>{{liga.nombre}}</p>
                </div>
                
                <div class="div-info-liga">
                    <p>{{liga.numero_jugadores}}/10</p>
                    <span class="separator">|</span>
                    <p>{{liga.puntos || 0}} pts</p>
                    <span class="separator">|</span>
                    <p class="valor-tc">{{liga.dinero || 0}} Tc</p>
                </div>
                
                <div class="div-opciones-liga" (click)="toggleMenu(i, $event)">
                    <img class="icon" src="Utensilios/Emojis/tres-puntos.png" alt="opciones">

                    <div *ngIf="activeMenuIndex === i" class="dropdown-menu">
                        <div class="menu-item salir" (click)="salirDeLiga(i, $event)">
                            <span>Salir de la liga</span>
                            <span class="trash-icon">üóëÔ∏è</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="acciones-ligas">
            <div class="btn-liga crear" (click)="crearLiga()">
                Crear liga
            </div>
            <div class="btn-liga unirse" (click)="unirseLiga()">
                Unirse a liga
            </div>
        </div>
    </section>

    <div *ngIf="notificationMsg" class="toast-notification" [class.success]="isSuccess" [class.error]="!isSuccess">
        <div class="toast-icon">{{ isSuccess ? '‚úî' : 'i' }}</div>
        <div class="toast-content">
            <p class="toast-message">{{ notificationMsg }}</p>
        </div>
    </div>

    <div *ngIf="mostrarModal" class="modal-overlay" (click)="cerrarModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h2>Crear Nueva Liga</h2>
                <span class="close-btn" (click)="cerrarModal()">&times;</span>
            </div>
            
            <div class="modal-body">
                <label>Nombre de la liga:</label>
                <input type="text" [(ngModel)]="nombreNuevaLiga" placeholder="Ej: Los Gal√°cticos" autofocus>
                <label>Usuarios m√°ximos:</label>
                <input type="number" [(ngModel)]="maxUsuariosNuevaLiga" placeholder="Maximo: 10">
                <label>Clave de la liga:</label>
                <input type="text" [(ngModel)]="claveNuevaLiga" placeholder="Ej: 1234abcd">
            </div>

            <div class="modal-footer">
                <button class="btn-cancelar" (click)="cerrarModal()">Cancelar</button>
                <button class="btn-confirmar" (click)="confirmarCreacion()">Crear</button>
            </div>
        </div>
    </div>
</main>
